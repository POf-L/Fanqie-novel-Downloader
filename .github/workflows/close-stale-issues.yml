name: Close Stale Issues

on:
  schedule:
    # 每天中国时间12:00运行 (UTC+8，所以是UTC 04:00)
    - cron: '0 4 * * *'
  workflow_dispatch:  # 允许手动触发

permissions:
  issues: write

jobs:
  close-stale-issues:
    runs-on: ubuntu-latest
    steps:
      - name: Close stale issues
        uses: actions/stale@v9
        with:
          # Issue 配置
          days-before-issue-stale: 7
          days-before-issue-close: 0
          stale-issue-label: 'stale'
          stale-issue-message: |
            此 issue 已超过 7 天没有新的回应，将被自动关闭。
            如果问题仍然存在，请重新打开或创建新的 issue。

            This issue has been inactive for more than 7 days and will be automatically closed.
            If the problem persists, please reopen or create a new issue.
          close-issue-message: |
            此 issue 因长时间无回应已被自动关闭。
            如有需要，欢迎重新打开或提交新的 issue。

            This issue has been automatically closed due to inactivity.
            Feel free to reopen or submit a new issue if needed.

          # PR 配置（不处理PR）
          days-before-pr-stale: -1
          days-before-pr-close: -1

          # 排除配置
          exempt-issue-labels: 'pinned,enhancement,bug,help wanted'
          exempt-all-assignees: true

          # 其他配置
          remove-stale-when-updated: true
          operations-per-run: 100
